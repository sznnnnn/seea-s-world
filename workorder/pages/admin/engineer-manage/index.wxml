<!--pages/admin/engineer-manage/index.wxml-->
<view class="container">
  <!-- 搜索和筛选区域 -->
  <view class="filter-bar">
    <van-search
      value="{{ searchValue }}"
      placeholder="搜索工程师"
      bind:change="onSearch"
      class="search"
    />
    <van-dropdown-menu>
      <van-dropdown-item 
        value="{{ type }}" 
        options="{{ typeOptions }}" 
        bind:change="onTypeChange"
      />
      <van-dropdown-item 
        value="{{ level }}" 
        options="{{ levelOptions }}" 
        bind:change="onLevelChange"
      />
    </van-dropdown-menu>
  </view>

  <!-- 工程师列表 -->
  <view class="engineer-list">
    <view class="engineer-card" wx:for="{{ engineers }}" wx:key="id">
      <view class="engineer-header">
        <view class="engineer-info">
          <text class="engineer-name">{{ item.name }}</text>
          <text class="engineer-level">{{ item.level === 'mid' ? '中级技师' : item.level === 'junior' ? '初级技师' : '实习技师' }}</text>
        </view>
        <text class="engineer-status {{ item.status }}">{{ item.status === 'free' ? '空闲' : '忙碌' }}</text>
      </view>

      <view class="engineer-body">
        <view class="info-item">
          <text class="label">专业方向：</text>
          <text class="value">{{ item.type === 'excavator' ? '挖机' : item.type === 'loader' ? '装载机' : item.type === 'electrical' ? '电工' : '通用' }}</text>
        </view>
        <view class="info-item">
          <text class="label">联系电话：</text>
          <text class="value">{{ item.phone }}</text>
        </view>
        <view class="info-item">
          <text class="label">技能：</text>
          <view class="skill-tags">
            <text class="skill-tag" wx:for="{{ item.skills }}" wx:key="*this">{{ item }}</text>
          </view>
        </view>
      </view>

      <view class="engineer-footer">
        <van-button 
          type="default" 
          size="small" 
          icon="phone-o"
          bind:tap="onCall" 
          data-phone="{{ item.phone }}"
        >拨打电话</van-button>
        <van-button 
          type="primary" 
          size="small" 
          bind:tap="onAssignOrder" 
          data-id="{{ item.id }}"
        >分配工单</van-button>
      </view>
    </view>
  </view>
</view>