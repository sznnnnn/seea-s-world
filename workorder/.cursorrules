# 工单系统开发规范

## 1. 目录结构规范
```
workorder/
├── components/          # 自定义组件
│   ├── order-card/     # 工单卡片组件
│   ├── status-tag/     # 状态标签组件
│   └── ...
├── pages/              # 页面文件
│   ├── login/         # 登录页面
│   ├── engineer/      # 工程师相关页面
│   └── admin/         # 管理员相关页面
├── utils/             # 工具函数
├── services/          # 接口服务
├── styles/            # 全局样式
└── app.json          # 全局配置
```

## 2. 命名规范
### 2.1 文件命名
- 页面文件夹：小写字母，多词用连字符，如：order-list
- 组件文件夹：小写字母，多词用连字符，如：order-card
- JS文件：驼峰命名，如：orderService.js
- WXSS文件：与对应的WXML文件同名
- 图片资源：小写字母，多词用连字符，如：icon-home.png

### 2.2 变量命名
- 变量：驼峰命名，如：orderList
- 常量：大写字母，下划线分隔，如：MAX_ORDER_COUNT
- 组件：大驼峰命名，如：OrderCard
- 事件处理函数：on开头，如：onOrderTap

## 3. 代码格式规范
### 3.1 缩进
- 使用2个空格作为缩进
- 不使用Tab

### 3.2 空行
- 方法之间保留一个空行
- 逻辑块之间保留一个空行
- 文件末尾保留一个空行

### 3.3 注释规范
- 文件头部必须包含文件说明
- 方法必须包含注释说明功能
- 复杂逻辑必须添加注释
```javascript
/**
 * 工单处理页面
 * @author 作者
 * @date 2024-03-xx
 */
```

## 4. 组件开发规范
### 4.1 组件结构
- 每个组件必须包含四个文件：
  - index.js
  - index.json
  - index.wxml
  - index.wxss

### 4.2 组件属性
- 必须声明properties类型
- 必须提供默认值
- 必须添加注释说明

## 5. 样式规范
### 5.1 全局样式
- 使用app.wxss定义全局样式
- 使用主题变量统一管理颜色
- 避免使用!important

### 5.2 组件样式
- 组件样式使用BEM命名规范
- 避免使用内联样式
- 避免样式嵌套过深

## 6. 接口规范
### 6.1 接口命名
- 使用RESTful风格
- URL使用小写字母
- 多词用连字符分隔

### 6.2 接口封装
- 统一使用services目录下的服务类
- 统一处理错误信息
- 统一处理loading状态

## 7. 版本控制规范
### 7.1 分支管理
- master：主分支
- develop：开发分支
- feature/*：功能分支
- hotfix/*：紧急修复分支

### 7.2 提交信息
- feat：新功能
- fix：修复bug
- docs：文档更新
- style：代码格式化
- refactor：重构代码

## 8. 性能规范
- 避免频繁setData
- 合理使用分页加载
- 及时销毁不需要的事件监听
- 避免不必要的数据绑定
- 合理使用缓存机制

## 9. 安全规范
- 敏感数据加密存储
- 接口必须进行签名验证
- 防止XSS攻击
- 防止SQL注入
- 日志脱敏处理

## 10. 测试规范
- 编写单元测试
- 提交前进行自测
- 保证代码覆盖率
- 记录测试用例
- 进行性能测试

## 11. 文档规范
- 及时更新文档
- 文档结构清晰
- 示例代码完整
- 版本信息明确
- 更新日志完整
